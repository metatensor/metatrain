ARG BASE_IMAGE
FROM $BASE_IMAGE

# Copy metatrain repository within the container
# The repo is cloned by CI (GIT_STRATEGY: clone)
COPY . /metatrain/

RUN python3 -m venv /mtt-venv && \
	. /mtt-venv/bin/activate && \
	python -m pip install --no-build-isolation torch==2.8.0+cu128 sphericart-torch==1.0.2 && \ 
	python -m pip install /metatrain[soap-bpnn]
